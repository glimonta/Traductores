#!/usr/bin/env ruby

#Gabriela Limonta 10-10385
#John Delgado 10-10196

require 'Lexer'
require 'Parser'

# En el main se llama a los metodos declarados anteriormente
def main
  # Leemos la entrada del archivo
  entrada = File::read(ARGV[0])

  # Creamos un nuevo lexer con esta entrada, se lo pasamos al parser que
  # genera el ast y se imprime por pantalla el mismo.
  begin
    puts Parser::new.parse(Lexer::new entrada)
  rescue ErrorSintactico => e
    puts e
  end
end

def bleh
  lexer = Lexer::new File::read(ARGV[0])
  t = false
  while (!t) do
    begin
      t = lexer.yylex.nil?
    rescue ErrorLexicografico => error
    end
  end
  puts lexer
end

main
#bleh
